# 캐시 기본 동작

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8%20b762d0b43c0240499dff88533ab8088d/Untitled.png)

웹브라우저에서 star.jpg를 요청하는 상황일 때

서버에서 보고 star.jpg가 있으면 응답을 내려준다. 

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8%20b762d0b43c0240499dff88533ab8088d/Untitled%201.png)

응답을 살펴보면

헤더들이 있고, star.jpg에 관한 바이트 코드들이 주어진다.

이미지 크기가 1.1M라고 생각한다면  HTTP 헤더들이 0.1M, 바디들이 1.0M가 된다고 생각하자.

**똑같은 이미지에 대해 요청이 왔을 경우에** **캐시가 없다면, 헤더, 바디부를 다시 만들어서 1.1M짜리를 다시 내려준다.**

### 즉, 캐시가 없을때

- 데이터가 변경되지 않아도 계속 네트워크를 통해서 데이터를 다운로드 받아야 한다.
- 인터넷 네트워크는 매우 느리고 비싸다.
- 브라우저 로딩 속도가 느리다.
- 느린 사용자 경험

### 캐시 적용시에는

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8%20b762d0b43c0240499dff88533ab8088d/Untitled%202.png)

웹 브라우저에서 서버가 캐시와 관련된 세팅을 해야한다.

**cache-control: max-age=60 : 60초동안 유효하다는 뜻.** 

이 응답을 **브라우저 캐시**에 저장해 놓는다. 

2번째 요청시에는 캐시를 먼저 뒤진다 → 있다면 사용한다.

## 캐시적용

- **캐시 덕분에 캐시 가능 시간동안 네트워크를 사용하지 않아도 된다.**
- **비싼 네트워크 사용량을 줄일 수 있다.**
- **브라우저 로딩 속도가 매우 빠르다. → 웹브라우저 들어갔던곳 들어가면 빠름**
- **빠른 사용자 경험**

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8%20b762d0b43c0240499dff88533ab8088d/Untitled%203.png)

**만약 60초 초과된 상황이라면? → 당연히 다시 요청!**

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%A8%20b762d0b43c0240499dff88533ab8088d/Untitled%204.png)

**캐시 유효 시간이 초과하면, 서버를 통해 데이터를 다시 조회하고, 캐시를 갱신한다**

**이때 다시 네트워크 다운로드가 발생한다.**

## “근데 이미지가 아예 변하지 않았는데 아예 처음부터 다운로드 받는거 너무 아깝지 않아…?” 에서 파생된 이야기가 시작됩니다.